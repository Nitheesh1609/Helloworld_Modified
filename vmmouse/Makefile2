
obj-$(CONFIG_MOUSE_PS2)                 += src/psmouse.o
psmouse-objs 				:= src/psmouse-base.o
psmouse-$(CONFIG_MOUSE_PS2_VMMOUSE)	+= target/x86_64-linux-kernel-module/$(BUILD)/libhello_world.a

src/psmouse.o: Cargo.toml src/lib.rs src/psmouse-base.c 
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
	cargo clean
	rm -rf psmouse-objs
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean
